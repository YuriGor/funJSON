{"version":3,"file":"funJSON.js","sources":["../es/funJSON.js"],"sourcesContent":["function reviver(key, value) {\n  if (detect(key, value)) {\n    try {\n      value = eval('(' + value + ')');\n    } catch (exc) {\n      /* invalid js? leave as is */\n    }\n  }\n  return value;\n}\n\nfunction detect(key, value) {\n  if (typeof value !== 'string') {\n    return false;\n  }\n\n  return (\n    typeof value == 'string' &&\n    (/^function\\s*\\([\\s\\w$,_/*]*\\)\\s*\\{[\\s\\S]*\\}$/.test(value) ||\n      /^\\([\\s\\w$,_/*]*\\)\\s*=>\\s*\\{[\\s\\S]*\\}$/.test(value))\n  );\n}\n\nfunction replacer(key, value) {\n  if (typeof value == 'function') value = value.toString();\n  return value;\n}\n\nexport function parse(text, extReviver) {\n  return JSON.parse(text, extReviver || reviver);\n}\n\nexport function stringify(value, extReplacer, space) {\n  return JSON.stringify(value, extReplacer || replacer, space);\n}\n\nexport function stringifyToScript(value, extReplacer, space) {\n  var functions = [];\n  var rp = function(key, value) {\n    if (typeof value == 'function') {\n      value = extReplacer ? extReplacer(key, value) : value.toString();\n      functions.push(value);\n    }\n    return value;\n  };\n  var script = stringify(value, rp, space);\n  for (var i = 0; i < functions.length; i++) {\n    script = script.replace(stringify(functions[i], rp, space), functions[i]);\n  }\n  return script;\n}\n"],"names":["reviver","key","value","detect","eval","exc","test","replacer","toString","parse","text","extReviver","JSON","stringify","extReplacer","space","stringifyToScript","functions","rp","push","script","i","length","replace"],"mappings":"2CAAA,SAASA,QAAQC,IAAKC,OACpB,GAAIC,OAAOF,IAAKC,OACd,IACEA,MAAQE,KAAK,IAAMF,MAAQ,KAC3B,MAAOG,IAIX,OAAOH,MAGT,SAASC,OAAOF,EAAKC,GACnB,MAAqB,iBAAVA,IAKO,iBAATA,IACN,8CAA8CI,KAAKJ,IAClD,wCAAwCI,KAAKJ,KAInD,SAASK,SAASN,EAAKC,GAErB,MADoB,mBAATA,IAAqBA,EAAQA,EAAMM,YACvCN,EAGF,SAASO,MAAMC,EAAMC,GAC1B,OAAOC,KAAKH,MAAMC,EAAMC,GAAcX,SAGjC,SAASa,UAAUX,EAAOY,EAAaC,GAC5C,OAAOH,KAAKC,UAAUX,EAAOY,GAAeP,SAAUQ,GAGjD,SAASC,kBAAkBd,EAAOY,EAAaC,GAUpD,IATA,IAAIE,EAAY,GACZC,EAAK,SAASjB,EAAKC,GAKrB,MAJoB,mBAATA,IACTA,EAAQY,EAAcA,EAAYb,EAAKC,GAASA,EAAMM,WACtDS,EAAUE,KAAKjB,IAEVA,GAELkB,EAASP,UAAUX,EAAOgB,EAAIH,GACzBM,EAAI,EAAGA,EAAIJ,EAAUK,OAAQD,IACpCD,EAASA,EAAOG,QAAQV,UAAUI,EAAUI,GAAIH,EAAIH,GAAQE,EAAUI,IAExE,OAAOD"}