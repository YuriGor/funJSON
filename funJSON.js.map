{"version":3,"file":"funJSON.js","sources":["es/funJSON.js"],"sourcesContent":["function reviver(key, value) {\n  if (detect(key, value)) {\n    try {\n      value = eval('(' + value + ')');\n    } catch (exc) {\n      /* invalid js? leave as is */\n    }\n  }\n  return value;\n}\n\nfunction detect(key, value) {\n  if (typeof value !== 'string') {\n    return false;\n  }\n\n  return (\n    typeof value == 'string' &&\n    (/^function\\s*\\([\\s\\w$,_/*]*\\)\\s*\\{[\\s\\S]*\\}$/.test(value) ||\n      /^\\([\\s\\w$,_/*]*\\)\\s*=>\\s*\\{[\\s\\S]*\\}$/.test(value))\n  );\n}\n\nfunction replacer(key, value) {\n  if (typeof value == 'function') value = value.toString();\n  return value;\n}\n\nexport function parse(text, extReviver) {\n  return JSON.parse(text, extReviver || reviver);\n}\n\nexport function stringify(value, extReplacer, space) {\n  return JSON.stringify(value, extReplacer || replacer, space);\n}\n\nexport function stringifyToScript(value, extReplacer, space) {\n  var functions = [];\n  var rp = function(key, value) {\n    if (typeof value == 'function') {\n      value = extReplacer ? extReplacer(key, value) : value.toString();\n      functions.push(value);\n    }\n    return value;\n  };\n  var script = stringify(value, rp, space);\n  for (var i = 0; i < functions.length; i++) {\n    script = script.replace(stringify(functions[i], rp, space), functions[i]);\n  }\n  return script;\n}\n"],"names":[],"mappings":";;AAAA,SAAS,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE;AAC7B,EAAE,IAAI,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE;AAC1B,IAAI,IAAI;AACR,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC;AACtC,KAAK,CAAC,OAAO,GAAG,EAAE;AAClB;AACA,KAAK;AACL,GAAG;AACH,EAAE,OAAO,KAAK,CAAC;AACf,CAAC;AACD;AACA,SAAS,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE;AAC5B,EAAE,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AACjC,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG;AACH;AACA,EAAE;AACF,IAAI,OAAO,KAAK,IAAI,QAAQ;AAC5B,KAAK,6CAA6C,CAAC,IAAI,CAAC,KAAK,CAAC;AAC9D,MAAM,uCAAuC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC1D,IAAI;AACJ,CAAC;AACD;AACA,SAAS,QAAQ,CAAC,GAAG,EAAE,KAAK,EAAE;AAC9B,EAAE,IAAI,OAAO,KAAK,IAAI,UAAU,IAAE,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAC;AAC3D,EAAE,OAAO,KAAK,CAAC;AACf,CAAC;AACD;AACO,SAAS,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE;AACxC,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,UAAU,IAAI,OAAO,CAAC,CAAC;AACjD,CAAC;AACD;AACO,SAAS,SAAS,CAAC,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE;AACrD,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,WAAW,IAAI,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC/D,CAAC;AACD;AACO,SAAS,iBAAiB,CAAC,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE;AAC7D,EAAE,IAAI,SAAS,GAAG,EAAE,CAAC;AACrB,EAAE,IAAI,EAAE,GAAG,SAAS,GAAG,EAAE,KAAK,EAAE;AAChC,IAAI,IAAI,OAAO,KAAK,IAAI,UAAU,EAAE;AACpC,MAAM,KAAK,GAAG,WAAW,GAAG,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;AACvE,MAAM,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC5B,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG,CAAC;AACJ,EAAE,IAAI,MAAM,GAAG,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;AAC3C,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC7C,IAAI,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9E,GAAG;AACH,EAAE,OAAO,MAAM,CAAC;AAChB;;;;;;"}